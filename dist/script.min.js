var __awaiter=this&&this.__awaiter||function(t,o,s,u){return new(s=s||Promise)(function(n,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function a(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,a)}i((u=u.apply(t,o||[])).next())})};class App{constructor(){this.result=document.getElementById("result"),this.copyButton=document.getElementById("copy"),this.copySpan=document.getElementById("copy-status"),this.characterLengthInput=document.getElementById("characterLengthInput"),this.characterLengthSpan=document.getElementById("characterLengthSpan"),this.options=document.querySelectorAll('input[type="checkbox"]'),this.strength=document.getElementById("strength"),this.level=document.getElementById("level"),this.submit=document.getElementById("submit"),this.configure()}configure(){this.submit.addEventListener("click",this.submitHandler.bind(this)),this.characterLengthInput.addEventListener("input",this.rangeChangeHandler.bind(this)),this.copyButton.addEventListener("click",this.copyHandler.bind(this))}copyHandler(){let t=this.result.value;navigator.clipboard.writeText(t).then(()=>{t.length&&(this.copySpan.classList.remove("hidden"),this.copySpan.classList.add("visible"),setTimeout(()=>{this.copySpan.classList.remove("visible"),this.copySpan.classList.add("hidden")},1e3))},t=>{console.error("Async: Could not copy text: ",t)})}rangeChangeHandler(t){t=t.target;this.renderValue(this.characterLengthSpan,this.roundValue(t.value))}roundValue(t){return Math.floor(+t).toString()}renderValue(t,e){t.innerText=e}submitHandler(){return __awaiter(this,void 0,void 0,function*(){var t=this.gatherUserInputs(),e=yield this.createPassword(t);this.result.value=e,this.showPasswordStrength(t)})}gatherUserInputs(){var t,e=parseInt(this.characterLengthInput.value),n=[];for(t of this.options.values())t.checked&&n.push(t.id);return{length:e,options:n}}getData(e="/assets/alphabet.json"){return __awaiter(this,void 0,void 0,function*(){var t=yield(yield fetch(e)).json();return JSON.parse(t)})}createPassword(l){return __awaiter(this,void 0,void 0,function*(){var t=l.options,e=+this.roundValue(l.length.toString()),n=yield this.getData(),r=Math.floor(e/t.length),e=e-r*t.length,a=[],i=[],o=[],s=[];function u(e,n,r){for(let t=0;t<r;t++){a=0,i=e.length-1,a=Math.ceil(a),i=Math.floor(i);i=Math.floor(Math.random()*(i-a+1))+a;n.push(e[i])}var a,i}return t.includes("uppercase")&&u(n.uppercase,a,r),t.includes("numbers")&&u(["0","1","2","3","4","5","6","7","8","9"],i,r),t.includes("lowercase")&&u(n.lowercase,s,r),t.includes("symbols")&&u(["!","@","#","$","%","^","&","*","(",")"],o,r),e&&u(n.lowercase,s,e),(e=>{for(let t=e.length-1;0<t;t--){var n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e})(s.concat(a,i,o)).join("")})}showPasswordStrength(t){var e=t.length,t=t.options;let n;0==t.length&&(n=""),e<=6&&0!==t.length&&(n="too weak!"),6<e&&1==t.length&&(n="too weak!"),6<e&&2==t.length&&(n="weak"),6<e&&3==t.length&&(n="medium"),6<e&&4==t.length&&(n="strong"),this.renderValue(this.strength,n);let r=["too weak!","weak","medium","strong"].indexOf(n)+1,a=this.level.children,i=["red","orange","yellow","green"],o=i[r-1];for(let e=0;e<a.length;e++)for(let t=0;t<i.length;t++)a[e].classList.remove(i[t]);for(let t=0;t<r;t++)a[t].classList.add(o)}}let app=new App;function isOlderEdgeOrIE(){return-1<window.navigator.userAgent.indexOf("MSIE ")||!!navigator.userAgent.match(/Trident.*rv\:11\./)||-1<window.navigator.userAgent.indexOf("Edge")}function valueTotalRatio(t,e,n){return((t-e)/(n-e)).toFixed(2)}function getLinearGradientCSS(t,e,n){return["-webkit-gradient(","linear, ","left top, ","right top, ","color-stop("+t+", "+e+"), ","color-stop("+t+", "+n+")",")"].join("")}function updateRangeEl(t){var e,n,r=a(t.value,t.min,t.max);function a(t,e,n){return((t-e)/(n-e)).toFixed(2)}function i(t,e,n){return["-webkit-gradient(","linear, ","left top, ","right top, ","color-stop("+t+", "+e+"), ","color-stop("+t+", "+n+")",")"].join("")}function o(t){var e=a(t.value,t.min,t.max);t.style.backgroundImage=i(e,"#A4FFAF","#18171F")}e=document.querySelector("input[type=range]"),n=document.querySelector("input[type=text]"),-1<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./)||-1<window.navigator.userAgent.indexOf("Edge")?(e.style.height="20px",e.addEventListener("change",function(t){n.value=t.target.value}),e.addEventListener("input",function(t){n.value=t.target.value})):(o(e),e.addEventListener("input",function(t){o(t.target),n.value=t.target.value})),t.style.backgroundImage=i(r,"#A4FFAF","#18171F")}function initRangeEl(){var t=document.querySelector("input[type=range]"),e=document.querySelector("input[type=text]");isOlderEdgeOrIE()?(t.style.height="20px",t.addEventListener("change",function(t){e.value=t.target.value}),t.addEventListener("input",function(t){e.value=t.target.value})):(updateRangeEl(t),t.addEventListener("input",function(t){updateRangeEl(t.target),e.value=t.target.value}))}initRangeEl();